<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:400,500,700,800,900"
      rel="stylesheet"
    />
    <title>List - Kanban</title>
  </head>
  <body>
    <div id="loadingScreen">
      <div class="loader"></div>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit labels</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- MODAL CONTENT -->
            <form>
              <!-- LABEL 1 -->
              <div class="form-group">
                <label for="col1">LABEL 1</label>
                <input type="text" class="form-control no-ml" id="col1" value="" />
              </div>

              <!-- LABEL 2 -->
              <div class="form-group">
                <label for="col2">LABEL 2</label>
                <input type="text" class="form-control no-ml" id="col2" value="" />
              </div>

              <!-- LABEL 3 -->
              <div class="form-group">
                <label for="col3">LABEL 3</label>
                <input type="text" class="form-control no-ml" id="col3" value="" />
              </div>

              <!-- LABEL 4 -->
              <div class="form-group">
                <label for="col4">LABEL 4</label>
                <input type="text" class="form-control no-ml" id="col4" value="" />
              </div>

              <!-- LABEL 5 -->
              <div class="form-group">
                <label for="col5">LABEL 5</label>
                <input type="text" class="form-control no-ml" id="col5" value="" />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- TOPBAR -->
    <div class="controls p-3">
      <form class="form-inline">
        <label for="titleInput">Title:</label>
        <input
          class="form-control form-control-sm"
          type="text"
          name="title"
          id="titleInput"
          autocomplete="off"
        />
        <label for="descriptionInput">Description:</label>
        <input
          class="form-control form-control-sm"
          type="text"
          name="description"
          id="descriptionInput"
          autocomplete="off"
        />
        <button class="btn btn-dark" id="add">Add</button>
        <button class="btn btn-danger mx-2" id="deleteAll">Delete All</button>

        <!-- Button trigger modal -->
        <button
          type="button"
          class="btn btn-primary"
          data-toggle="modal"
          data-target="#exampleModal"
        >
          Labels
        </button>

        <button class="btn" id="theme-btn">Dark/Light</button>
      </form>
    </div>
    <div class="boards overflow-auto p-0" id="boardsContainer"></div>

    <script>
      if (typeof module === 'object') {
        window.module = module;
        module = undefined;
      }
    </script>
    <script src="script.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>
    <script>
      if (window.module) module = window.module;
    </script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-36251023-1']);
      _gaq.push(['_setDomainName', 'jqueryscript.net']);
      _gaq.push(['_trackPageview']);

      (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src =
          ('https:' == document.location.protocol
            ? 'https://ssl'
            : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">
      window.onload = () => {
        const KANBAN_CARDS = 'kanban.cards';
        const cardsStorage = localStorage.getItem(KANBAN_CARDS);

        if (cardsStorage !== null) {
          // RESTORE
          const parsedCards = JSON.parse(cardsStorage);
          console.log('RESTORE', parsedCards);

          // set labels
          parsedCards.map((item, index) => {
            const labelElement = document.querySelector(`label[for=col${index+1}]`);
            const inputElement = document.querySelector(`input[id=col${index+1}]`);

            labelElement.innerHTML = `Coluna ${index+1}`;
            inputElement.value = item;
          });
        }

        else {
          // SET DEFAULT
          console.log('DEFAULT LABELS SET');
          const titles = ['BACKLOG', 'TO DO', 'IN PROGRESS', 'TESTING', 'DONE'];
          localStorage.setItem(KANBAN_CARDS, JSON.stringify(titles));
        }
      }
    </script>
  </body>
</html>
